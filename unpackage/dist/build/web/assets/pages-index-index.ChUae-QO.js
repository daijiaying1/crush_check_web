import{c as s,d as a,g as e,s as o,a as t,b as n,w as c,i as l,o as i,e as r,f as d,n as h,h as g,j as p,k as w}from"./index-BbTidvn7.js";const k={CorrectLevel:{L:1,M:0,Q:3,H:2},toCanvas(e,o,t,n){const c=t.width||200,l=t.margin||2,i=t.colorDark||"#000000",r=t.colorLight||"#FFFFFF",d=t.correctLevel||0,h=s(e);h.setFillStyle(r),h.fillRect(0,0,c,c);const g=["L","M","Q","H"][d]||"M",p=`https://api.qrserver.com/v1/create-qr-code/?size=${c}x${c}&data=${encodeURIComponent(o)}&color=${i.replace("#","")}&bgcolor=${r.replace("#","")}&margin=${l}&ecc=${g}`;a({url:p,success:s=>{200===s.statusCode?(h.drawImage(s.tempFilePath,0,0,c,c),h.draw(!1,(()=>{n&&n(null)}))):n&&n(new Error("生成二维码失败"))},fail:s=>{n&&n(s)}})}};const C=((s,a)=>{const e=s.__vccOpts||s;for(const[o,t]of a)e[o]=t;return e})({data:()=>({qrCodeUrl:"",canvasWidth:300,canvasHeight:300,downloadLinks:{ios:"https://www.crashcheck.net",apk:"https://www.crashcheck.net/apk/app.apk",google:"https://open.weixin.qq.com/"}}),onLoad(){const s=e().platform;console.log(s,"platform"),"ios"===s||"mac"===s?this.generateQRCode("ios"):"android"!==s&&"windows"!==s||this.generateQRCode("apk")},methods:{generateQRCode(s){let a="";switch(s){case"ios":a=this.downloadLinks.ios;break;case"apk":a=this.downloadLinks.apk;break;case"google":a=this.downloadLinks.google;break;default:a=`${this.downloadLinks.ios}\n${this.downloadLinks.apk}\n${this.downloadLinks.google}`}const e=300;this.canvasWidth=e,this.canvasHeight=e,this.$nextTick((()=>{k.toCanvas("qrCanvas",a,{width:e,margin:2,colorDark:"#000000",colorLight:"#FFFFFF",correctLevel:k.CorrectLevel.M},(s=>{s?(console.error("生成二维码失败:",s),o({title:"生成二维码失败",icon:"none"})):setTimeout((()=>{t({canvasId:"qrCanvas",width:e,height:e,destWidth:e,destHeight:e,success:s=>{this.qrCodeUrl=s.tempFilePath},fail:s=>{console.error("转换图片失败:",s),o({title:"生成二维码失败",icon:"none"})}},this)}),100)}))}))}}},[["render",function(s,a,e,o,t,k){const C=g,u=p,m=l,v=w;return i(),n(m,{class:"content"},{default:c((()=>[r(m,{class:"header"},{default:c((()=>[r(C,{class:"logo",src:"/h5/assets/logo-DtN6zjls.png",mode:"widthFix"}),r(u,{class:"app-name"},{default:c((()=>[d("Crush Check")])),_:1})])),_:1}),r(m,{class:"qr-container"},{default:c((()=>[r(v,{class:"qr-canvas-hidden","canvas-id":"qrCanvas",id:"qrCanvas",style:h({width:t.canvasWidth+"px",height:t.canvasHeight+"px"})},null,8,["style"]),t.qrCodeUrl?(i(),n(C,{key:0,class:"qr-image",src:t.qrCodeUrl,mode:"aspectFit"},null,8,["src"])):(i(),n(m,{key:1,class:"qr-placeholder"})),r(u,{class:"qr-tip"},{default:c((()=>[d("—— 快速测试TA渣不渣 ——")])),_:1}),r(u,{class:"qr-tip"},{default:c((()=>[d("手机立即体验")])),_:1})])),_:1}),r(m,{class:"download-buttons"},{default:c((()=>[r(m,{class:"download-btn ios-btn",onClick:a[0]||(a[0]=s=>k.generateQRCode("ios"))},{default:c((()=>[r(C,{class:"btn-icon",src:"/h5/assets/ios-Cm_3RaUh.png",mode:"widthFix"})])),_:1}),r(m,{class:"download-btn apk-btn",onClick:a[1]||(a[1]=s=>k.generateQRCode("apk"))},{default:c((()=>[r(C,{class:"btn-icon",src:"/h5/assets/apk-CTs78qgX.png",mode:"widthFix"})])),_:1}),r(m,{class:"download-btn google-btn",onClick:a[2]||(a[2]=s=>k.generateQRCode("google"))},{default:c((()=>[r(C,{class:"btn-icon",src:"/h5/assets/google-CdsDQ-vw.png",mode:"widthFix"})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-59f9d138"]]);export{C as default};
